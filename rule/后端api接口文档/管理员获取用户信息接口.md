# ç®¡ç†å‘˜è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£

## åŸºæœ¬ä¿¡æ¯

- **æ¥å£æ ‡è¯†**ï¼š`ADMIN_GET_USERS_INFO`
- **è¯·æ±‚è·¯å¾„**ï¼š`POST /api/admin/users/info`
- **æ¥å£æè¿°**ï¼šç®¡ç†å‘˜è·å–ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µæŸ¥è¯¢ã€æ¨¡ç³Šæœç´¢ã€å¤šæ¡ä»¶è¿‡æ»¤
- **è®¤è¯è¦æ±‚**ï¼šéœ€è¦ç®¡ç†å‘˜JWTè®¤è¯
- **é€‚ç”¨ä¸šåŠ¡å•å…ƒ**ï¼šç®¡ç†å‘˜ç”¨æˆ·ç®¡ç†æ¨¡å—

## è¯·æ±‚å‚æ•°

### è¯·æ±‚å¤´
```
Authorization: Bearer {JWT_TOKEN}
Content-Type: application/json
```

### è¯·æ±‚ä½“
```typescript
interface AdminUserQueryRequest {
  page?: number;              // é¡µç ï¼Œä»1å¼€å§‹ï¼Œé»˜è®¤1
  size?: number;              // æ¯é¡µå¤§å°ï¼ŒèŒƒå›´20-3000ï¼Œé»˜è®¤20
  sortBy?: string;            // æ’åºå­—æ®µï¼Œé»˜è®¤create_time
  sortDir?: string;           // æ’åºæ–¹å‘ï¼ŒASCæˆ–DESCï¼Œé»˜è®¤DESC
  keyword?: string;           // å…³é”®è¯æ¨¡ç³Šæœç´¢ï¼Œæ”¯æŒç”¨æˆ·åã€é‚®ç®±æœç´¢
  userId?: number;            // ç”¨æˆ·IDç²¾ç¡®æŸ¥è¯¢
  role?: string;              // ç”¨æˆ·è§’è‰²è¿‡æ»¤ï¼ŒUSERæˆ–ADMIN
  status?: string;            // è´¦æˆ·çŠ¶æ€è¿‡æ»¤ï¼ŒACTIVEæˆ–BANNED
  createTimeStart?: string;   // åˆ›å»ºæ—¶é—´èŒƒå›´æŸ¥è¯¢ - å¼€å§‹æ—¶é—´
  createTimeEnd?: string;     // åˆ›å»ºæ—¶é—´èŒƒå›´æŸ¥è¯¢ - ç»“æŸæ—¶é—´
}
```

## å‚æ•°éªŒè¯è§„åˆ™

| å‚æ•°å | ç±»å‹ | å¿…å¡« | éªŒè¯è§„åˆ™ | è¯´æ˜ |
|--------|------|------|----------|------|
| page | number | å¦ | >= 1 | é¡µç ï¼Œé»˜è®¤1 |
| size | number | å¦ | 20-3000 | æ¯é¡µå¤§å°ï¼Œé»˜è®¤20 |
| sortBy | string | å¦ | æšä¸¾å€¼ï¼šid, username, email, create_time, update_time | æ’åºå­—æ®µï¼Œé»˜è®¤create_time |
| sortDir | string | å¦ | æšä¸¾å€¼ï¼šASC, DESC | æ’åºæ–¹å‘ï¼Œé»˜è®¤DESC |
| keyword | string | å¦ | é•¿åº¦ <= 100 | å…³é”®è¯æœç´¢ï¼Œæ”¯æŒç”¨æˆ·åã€é‚®ç®±æ¨¡ç³ŠåŒ¹é… |
| userId | number | å¦ | > 0 | ç”¨æˆ·IDç²¾ç¡®æŸ¥è¯¢ |
| role | string | å¦ | æšä¸¾å€¼ï¼šUSER, ADMIN | ç”¨æˆ·è§’è‰²è¿‡æ»¤ |
| status | string | å¦ | æšä¸¾å€¼ï¼šACTIVE, BANNED | è´¦æˆ·çŠ¶æ€è¿‡æ»¤ |
| createTimeStart | string | å¦ | ISO 8601æ ¼å¼ | åˆ›å»ºæ—¶é—´èŒƒå›´å¼€å§‹ï¼Œå¦‚ï¼š2025-01-01T00:00:00 |
| createTimeEnd | string | å¦ | ISO 8601æ ¼å¼ | åˆ›å»ºæ—¶é—´èŒƒå›´ç»“æŸï¼Œå¦‚ï¼š2025-12-31T23:59:59 |

## å“åº”ç¤ºä¾‹

### æˆåŠŸå“åº”ï¼ˆçŠ¶æ€ç  200ï¼‰

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "content": [
      {
        "id": 1,
        "username": "testuser",
        "email": "test@example.com",
        "role": "USER",
        "createTime": "2025-08-25T16:55:45",
        "updateTime": "2025-08-25T16:55:47",
        "domainCount": 5,
        "dnsRecordCount": 12,
        "lastLoginTime": null,
        "status": "ACTIVE",
        "banReason": null,
        "banTime": null,
        "banAdminId": null,
        "domNum": 2
      },
      {
        "id": 27,
        "username": "user27",
        "email": "user27@qq.com",
        "role": "USER",
        "createTime": "2025-09-09T15:30:20",
        "updateTime": "2025-09-09T15:30:20",
        "domainCount": 2,
        "dnsRecordCount": 8,
        "lastLoginTime": null,
        "status": "BANNED",
        "banReason": "è¿è§„æ“ä½œ",
        "banTime": "2025-09-13T10:30:00",
        "banAdminId": 7,
        "domNum": 2
      }
    ],
    "page": 1,
    "size": 20,
    "total": 28,
    "totalPages": 2,
    "first": true,
    "last": false,
    "hasNext": true,
    "hasPrevious": false
  },
  "timestamp": "2025-09-13T09:00:00Z"
}
```

### å¤±è´¥å“åº”

#### æœªæˆæƒï¼ˆ401ï¼‰
```json
{
  "code": 401,
  "message": "æœªæˆæƒè®¿é—®ï¼Œè¯·å…ˆç™»å½•",
  "data": null,
  "timestamp": "2025-09-13T09:00:00Z"
}
```

#### æƒé™ä¸è¶³ï¼ˆ403ï¼‰
```json
{
  "code": 403,
  "message": "æƒé™ä¸è¶³ï¼Œä»…ç®¡ç†å‘˜å¯è®¿é—®",
  "data": null,
  "timestamp": "2025-09-13T09:00:00Z"
}
```

#### å‚æ•°éªŒè¯å¤±è´¥ï¼ˆ400ï¼‰
```json
{
  "code": 400,
  "message": "å‚æ•°éªŒè¯å¤±è´¥",
  "data": {
    "errors": [
      {
        "field": "size",
        "message": "æ¯é¡µå¤§å°å¿…é¡»åœ¨20-3000ä¹‹é—´"
      },
      {
        "field": "sortBy",
        "message": "æ’åºå­—æ®µä¸æ”¯æŒï¼Œä»…æ”¯æŒï¼šid, username, email, create_time, update_time"
      }
    ]
  },
  "timestamp": "2025-09-13T09:00:00Z"
}
```

#### æœåŠ¡å™¨é”™è¯¯ï¼ˆ500ï¼‰
```json
{
  "code": 500,
  "message": "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯",
  "data": "è·å–ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨å¤±è´¥: æ•°æ®åº“è¿æ¥å¼‚å¸¸",
  "timestamp": "2025-09-13T09:00:00Z"
}
```

## å“åº”å­—æ®µè¯´æ˜

### UserInfoResponse å¯¹è±¡
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | number | ç”¨æˆ·ID |
| username | string | ç”¨æˆ·å |
| email | string | é‚®ç®±åœ°å€ |
| role | string | ç”¨æˆ·è§’è‰²ï¼ˆUSER/ADMINï¼‰ |
| createTime | string | åˆ›å»ºæ—¶é—´ï¼ˆISO 8601æ ¼å¼ï¼‰ |
| updateTime | string | æ›´æ–°æ—¶é—´ï¼ˆISO 8601æ ¼å¼ï¼‰ |
| domainCount | number | ç”¨æˆ·æ‹¥æœ‰çš„åŸŸåæ•°é‡ |
| dnsRecordCount | number | ç”¨æˆ·æ‹¥æœ‰çš„DNSè®°å½•æ•°é‡ |
| lastLoginTime | string\|null | æœ€åç™»å½•æ—¶é—´ï¼ˆæš‚æœªå®ç°ï¼‰ |
| status | string | è´¦æˆ·çŠ¶æ€ï¼ˆACTIVE-æ­£å¸¸ï¼ŒBANNED-æ°¸ä¹…å°ç¦ï¼‰ |
| banReason | string\|null | å°ç¦åŸå› ï¼Œä»…å½“statusä¸ºBANNEDæ—¶æœ‰å€¼ |
| banTime | string\|null | å°ç¦æ—¶é—´ï¼ˆISO 8601æ ¼å¼ï¼‰ï¼Œä»…å½“statusä¸ºBANNEDæ—¶æœ‰å€¼ |
| banAdminId | number\|null | æ‰§è¡Œå°ç¦çš„ç®¡ç†å‘˜IDï¼Œä»…å½“statusä¸ºBANNEDæ—¶æœ‰å€¼ |
| domNum | number | å¯æ³¨å†ŒåŸŸåæ•°é‡é™åˆ¶ï¼Œé»˜è®¤ä¸º2ä¸ª |

### PageResponse å¯¹è±¡
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| content | array | å½“å‰é¡µæ•°æ®åˆ—è¡¨ |
| page | number | å½“å‰é¡µç  |
| size | number | æ¯é¡µå¤§å° |
| total | number | æ€»è®°å½•æ•° |
| totalPages | number | æ€»é¡µæ•° |
| first | boolean | æ˜¯å¦ä¸ºç¬¬ä¸€é¡µ |
| last | boolean | æ˜¯å¦ä¸ºæœ€åä¸€é¡µ |
| hasNext | boolean | æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ |
| hasPrevious | boolean | æ˜¯å¦æœ‰ä¸Šä¸€é¡µ |

## åŠŸèƒ½ç‰¹æ€§

### ğŸ” æŸ¥è¯¢åŠŸèƒ½
- **åˆ†é¡µæŸ¥è¯¢**ï¼šæ”¯æŒ20-3000æ¡/é¡µçš„åˆ†é¡µæŸ¥è¯¢
- **æ¨¡ç³Šæœç´¢**ï¼šæ”¯æŒæŒ‰ç”¨æˆ·åã€é‚®ç®±è¿›è¡Œæ¨¡ç³Šæœç´¢
- **ç²¾ç¡®æŸ¥è¯¢**ï¼šæ”¯æŒæŒ‰ç”¨æˆ·IDè¿›è¡Œç²¾ç¡®æŸ¥è¯¢
- **è§’è‰²è¿‡æ»¤**ï¼šæ”¯æŒæŒ‰ç”¨æˆ·è§’è‰²ï¼ˆUSER/ADMINï¼‰è¿›è¡Œè¿‡æ»¤
- **çŠ¶æ€è¿‡æ»¤**ï¼šæ”¯æŒæŒ‰è´¦æˆ·çŠ¶æ€ï¼ˆACTIVE/BANNEDï¼‰è¿›è¡Œè¿‡æ»¤
- **æ—¶é—´èŒƒå›´**ï¼šæ”¯æŒæŒ‰åˆ›å»ºæ—¶é—´èŒƒå›´è¿›è¡ŒæŸ¥è¯¢
- **çµæ´»æ’åº**ï¼šæ”¯æŒæŒ‰å¤šä¸ªå­—æ®µè¿›è¡Œå‡åº/é™åºæ’åº

### ğŸ“Š ç»Ÿè®¡ä¿¡æ¯
- **åŸŸåç»Ÿè®¡**ï¼šæ˜¾ç¤ºæ¯ä¸ªç”¨æˆ·æ‹¥æœ‰çš„æ´»è·ƒåŸŸåæ•°é‡
- **DNSè®°å½•ç»Ÿè®¡**ï¼šæ˜¾ç¤ºæ¯ä¸ªç”¨æˆ·æ‹¥æœ‰çš„å¯ç”¨DNSè®°å½•æ•°é‡
- **å°ç¦ä¿¡æ¯**ï¼šæ˜¾ç¤ºç”¨æˆ·å°ç¦çŠ¶æ€ã€å°ç¦åŸå› ã€å°ç¦æ—¶é—´å’Œæ‰§è¡Œç®¡ç†å‘˜
- **åŸŸåé™åˆ¶**ï¼šæ˜¾ç¤ºç”¨æˆ·å¯æ³¨å†Œçš„åŸŸåæ•°é‡é™åˆ¶
- **å®Œæ•´ä¿¡æ¯**ï¼šè¿”å›ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€ç»Ÿè®¡æ•°æ®å’Œç®¡ç†ä¿¡æ¯çš„å®Œæ•´è§†å›¾

### ğŸ”’ å®‰å…¨ç‰¹æ€§
- **JWTè®¤è¯**ï¼šéœ€è¦æœ‰æ•ˆçš„ç®¡ç†å‘˜JWT token
- **æƒé™éªŒè¯**ï¼šä»…ç®¡ç†å‘˜è§’è‰²å¯è®¿é—®
- **å‚æ•°éªŒè¯**ï¼šä¸¥æ ¼çš„å‚æ•°æ ¼å¼å’ŒèŒƒå›´éªŒè¯
- **SQLæ³¨å…¥é˜²æŠ¤**ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢SQLæ³¨å…¥

## æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•ç”¨ä¾‹1ï¼šåŸºç¡€åˆ†é¡µæŸ¥è¯¢
**è¯·æ±‚**ï¼š
```json
{
  "page": 1,
  "size": 10
}
```
**é¢„æœŸ**ï¼šè¿”å›å‰10ä¸ªç”¨æˆ·ä¿¡æ¯ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´å€’åº

### æµ‹è¯•ç”¨ä¾‹2ï¼šå…³é”®è¯æœç´¢
**è¯·æ±‚**ï¼š
```json
{
  "page": 1,
  "size": 20,
  "keyword": "test"
}
```
**é¢„æœŸ**ï¼šè¿”å›ç”¨æˆ·åæˆ–é‚®ç®±åŒ…å«"test"çš„ç”¨æˆ·

### æµ‹è¯•ç”¨ä¾‹3ï¼šè§’è‰²è¿‡æ»¤
**è¯·æ±‚**ï¼š
```json
{
  "page": 1,
  "size": 20,
  "role": "USER"
}
```
**é¢„æœŸ**ï¼šä»…è¿”å›æ™®é€šç”¨æˆ·ï¼ˆéç®¡ç†å‘˜ï¼‰

### æµ‹è¯•ç”¨ä¾‹4ï¼šæ—¶é—´èŒƒå›´æŸ¥è¯¢
**è¯·æ±‚**ï¼š
```json
{
  "page": 1,
  "size": 20,
  "createTimeStart": "2025-09-01T00:00:00",
  "createTimeEnd": "2025-09-30T23:59:59"
}
```
**é¢„æœŸ**ï¼šè¿”å›2025å¹´9æœˆåˆ›å»ºçš„ç”¨æˆ·

### æµ‹è¯•ç”¨ä¾‹5ï¼šå°ç¦çŠ¶æ€æŸ¥è¯¢
**è¯·æ±‚**ï¼š
```json
{
  "page": 1,
  "size": 20,
  "status": "BANNED"
}
```
**é¢„æœŸ**ï¼šä»…è¿”å›è¢«å°ç¦çš„ç”¨æˆ·

### æµ‹è¯•ç”¨ä¾‹6ï¼šç»„åˆæŸ¥è¯¢
**è¯·æ±‚**ï¼š
```json
{
  "page": 1,
  "size": 10,
  "keyword": "user",
  "role": "USER",
  "status": "ACTIVE",
  "sortBy": "username",
  "sortDir": "ASC"
}
```
**é¢„æœŸ**ï¼šè¿”å›ç”¨æˆ·ååŒ…å«"user"çš„æ­£å¸¸çŠ¶æ€æ™®é€šç”¨æˆ·ï¼ŒæŒ‰ç”¨æˆ·åå‡åºæ’åˆ—

## è°ƒè¯•è¯´æ˜

- **è®¤è¯æµ‹è¯•**ï¼šç¡®ä¿è¯·æ±‚å¤´åŒ…å«æœ‰æ•ˆçš„ç®¡ç†å‘˜JWT token
- **å‚æ•°éªŒè¯**ï¼šæµ‹è¯•å„ç§æ— æ•ˆå‚æ•°çš„å¤„ç†æƒ…å†µ
- **æ€§èƒ½æµ‹è¯•**ï¼šæµ‹è¯•å¤§æ•°æ®é‡ä¸‹çš„æŸ¥è¯¢æ€§èƒ½
- **è¾¹ç•Œæµ‹è¯•**ï¼šæµ‹è¯•åˆ†é¡µè¾¹ç•Œæƒ…å†µï¼ˆç¬¬ä¸€é¡µã€æœ€åä¸€é¡µã€ç©ºç»“æœç­‰ï¼‰